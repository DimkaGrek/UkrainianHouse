import{b as v,j as e,M as y,r as o,u as M,f as S,s as I,B as i,c as w,d as E,S as P,a as k}from"./index-Bg99GbQ6.js";import{u as g}from"./useNews-BzimnW0U.js";import{R as z,a as L,N as A}from"./ReadMoreButton-BTkeMrfl.js";import{I as B}from"./InfoMessage-Ct4lnWUE.js";import"./getFormattedDate-C-n2GMDM.js";const D=()=>{var m,p;const{announceNews:s}=g(),[r,t]=v();return s.length?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-[34px] flex flex-col-reverse gap-[16px] rounded-[18px] bg-[#ffd4377b] p-[18px] shadow-sm md:flex-row md:justify-between md:p-[24px] lg:mb-[44px] lg:px-[40px] lg:py-[57px]",children:[e.jsxs("div",{className:"flex min-h-full flex-col md:min-w-[50%] lg:max-w-[748px]",children:[e.jsx("h3",{className:"font-proza-semibold md:font-proza-medium lg:font-proza-semibold mb-[4px] text-[20px] font-semibold leading-[160%] text-[#1e1e1e] md:mb-[8px] md:text-[26px] md:font-medium md:leading-[131%] lg:mb-[20px] lg:text-[36px] lg:font-semibold lg:leading-[111%]",children:"Coming soon..."}),e.jsx("p",{className:"mb-[16px] line-clamp-3 font-istok text-[16px] leading-[137%] text-[#666] md:line-clamp-4 md:text-[18px] md:leading-[133%] lg:line-clamp-6 lg:text-[22px] lg:leading-[129%]",children:s[0].content}),e.jsx("div",{className:"mt-auto",children:e.jsx(z,{toggleModal:t})})]}),e.jsx("img",{className:"max-h-[450px] shrink-0 rounded-[10px] object-cover md:w-[300px] md:max-w-none md:rounded-[18px] lg:w-[450px] lg:max-w-[500px]",src:(m=s[0].photoUrls[0])==null?void 0:m.photoUrls,alt:`${((p=s[0].photoUrls[0])==null?void 0:p.caption)||"Announce photo"}`,width:"308",height:"250"})]}),r&&e.jsxs(y,{toggleModal:t,className:"bg-white py-[58px] pl-[20px] pr-[10px] md:py-[58px] md:pl-[40px] md:pr-[25px]",children:[" ",e.jsx(L,{...s[0]})]})]}):null},R=()=>{const{news:s}=g();return e.jsx("ul",{className:"mb-[34px] flex flex-col gap-y-[16px] md:mb-[40px] md:flex-row md:flex-wrap md:gap-x-[20px] lg:mb-[44px] lg:gap-x-[24px] lg:gap-y-[44px]",children:s.map((r,t)=>e.jsx(A,{item:r},t))})},H=()=>{const{news:s,page:r,isLoading:t,error:m}=g(),[p,b]=o.useState(!0),[x,j]=o.useState(""),[f,h]=o.useState(!1),n=M(),u=o.useRef(null),d=o.useCallback(()=>{const a={params:{page:r,status:"PUBLISHED",...x&&{keyword:x}}};n(S(a)).unwrap().then(l=>{n(I(l.currentPage+1));const c=l.currentPage+1<l.totalPages;b(c),!c&&s.length&&i.info("You have reached the end of the news list.")}).catch(l=>i.error(l.message))},[r,x,n,s.length]);o.useEffect(()=>{n(w()),n(E()).unwrap().then().catch(a=>i.error(a.message))},[n]),o.useEffect(()=>{f&&!t&&(d(),h(!1))},[f,d,n,t]),o.useEffect(()=>{const a=u.current,l=new IntersectionObserver(c=>{c[0].isIntersecting&&p&&!t&&!m&&d()},{threshold:1});return a&&l.observe(a),()=>{a&&l.unobserve(a)}},[n,d,m,p,x,r,t]);const N=a=>{n(w()),j(a),h(!0)};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"pb-[74px] md:pb-[50px] lg:pb-[110px]",children:[e.jsxs("div",{className:"mb-5 flex md:mb-[40px] md:items-center md:justify-between lg:mb-[44px]",children:[e.jsx("h3",{className:"font-proza-semibold lg:font-proza-medium hidden text-[20px] font-semibold leading-[160%] text-[#222] md:block lg:text-[60px] lg:font-medium lg:leading-[130%]",children:"News"}),e.jsx("div",{className:"md:w-[500px] lg:w-[654px]",children:e.jsx(P,{setQuery:N})})]}),e.jsx(D,{}),!s.length&&x&&!t?e.jsx(B,{keyword:x}):e.jsx(R,{}),e.jsx("div",{ref:u}),t&&e.jsx(k,{placement:"bottom"})]})})};export{H as default};
