import{r as s,u as I,B as f}from"./index-kMgHoixP.js";const D=(i,u,g,n,S,w,h,l)=>{const[b,m]=s.useState(!0),[o,v]=s.useState(""),[p,d]=s.useState(!1),t=I(),E=s.useRef(null),a=s.useCallback(()=>{const e={params:{page:u,status:"PUBLISHED",...o&&{keyword:o}}};t(w(e)).unwrap().then(r=>{t(g(r.currentPage+1));const c=r.currentPage+1<r.totalPages;m(c),!c&&i.length&&f.info("You have reached the end of the list.")}).catch(r=>{console.log("Error: ",r),f.error("Something went wrong. Please, reload the page.")})},[u,o,t,w,g,i.length]);return s.useEffect(()=>{t(h()),l&&t(l()).unwrap().then().catch(e=>{console.log("Error: ",e),f.error("Something went wrong. Please, reload the page.")})},[h,t,l]),s.useEffect(()=>{p&&!n&&(a(),d(!1))},[p,a,t,n]),s.useEffect(()=>{const e=E.current,r=new IntersectionObserver(c=>{c[0].isIntersecting&&b&&!n&&!S&&a()},{threshold:1});return e&&r.observe(e),()=>{e&&r.unobserve(e)}},[t,a,S,b,o,u,n]),{keyword:o,observerTarget:E,onSearchSubmit:e=>{t(h()),v(e),d(!0)}}};export{D as u};
