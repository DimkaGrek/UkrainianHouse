import{r as s,u as E,B as i}from"./index-Cmnr4nrd.js";const M=(l,u,S,c,g,b,f,h)=>{const[m,d]=s.useState(!0),[o,w]=s.useState(""),[p,v]=s.useState(!1),t=E(),I=s.useRef(null),a=s.useCallback(()=>{const e={params:{page:u,status:"PUBLISHED",...o&&{keyword:o}}};t(b(e)).unwrap().then(r=>{t(S(r.currentPage+1));const n=r.currentPage+1<r.totalPages;d(n),!n&&l.length&&i.info("You have reached the end of the list.")}).catch(r=>i.error(r.message))},[u,o,t,b,S,l.length]);return s.useEffect(()=>{t(f()),h&&t(h()).unwrap().then().catch(e=>i.error(e.message))},[f,t,h]),s.useEffect(()=>{p&&!c&&(a(),v(!1))},[p,a,t,c]),s.useEffect(()=>{const e=I.current,r=new IntersectionObserver(n=>{n[0].isIntersecting&&m&&!c&&!g&&a()},{threshold:1});return e&&r.observe(e),()=>{e&&r.unobserve(e)}},[t,a,g,m,o,u,c]),{keyword:o,observerTarget:I,onSearchSubmit:e=>{t(f()),w(e),v(!0)}}};export{M as u};
